var app;app=angular.module("yapp"),app.controller("RestaurantesController",["$scope","$http","$routeParams",function(r,e,a){var t;return r.title="Restaurantes",r.restaurantes=new Array,t=a.abiertos?"?open":"",e.get(base+"/restaurantes/all"+t).then(function(e){return r.restaurantes=e.data}),r.remove=function(a){return e.delete(base+"/restaurantes/delete?id="+encodeURIComponent(a)).then(function(e){return e.data.status&&(r.restaurantes=r.restaurantes.filter(function(r){return r.id!==a})),dialog.show("Éxito",e.data.data,"error")})}}]),app.controller("RestaurantController",["$scope","$http","$routeParams","$window","$rootScope",function(r,e,a,t,o){var n;return r.restaurante={},r.restaurante.horarios=r.initHorarios,n=!!a.id,n&&e.get(base+"/restaurantes/"+a.id).then(function(e){var a;return r.restaurante=e.data,a=r.restaurante.horarios,r.restaurante.horarios=a.length>0?a:r.initHorarios}),r.save=function(){return r.restaurante.horarios.forEach(function(r,e){return r.checked?r.horarios.length>0||(r.checked=!1):r.horarios=[],r.horarios=r.horarios.filter(function(r){return""!==r.apertura&&""!==r.cierre})}),e.put(base+"/restaurantes/save",r.restaurante).then(function(r){if(n?"":"/edit/"+r.data.row,r.data.status)return t.location.href="#!/restaurantes"})},r.addHorario=function(e){return r.restaurante.horarios[e].horarios.push({apertura:"",cierre:""})},r.removeHorario=function(e,a){return r.restaurante.horarios[e].horarios=r.restaurante.horarios[e].horarios.filter(function(t){return t!==r.restaurante.horarios[e].horarios[a]})},r.initHorarios=[{id:1,nombre:"Lunes",checked:!1,horarios:[]},{id:2,nombre:"Martes",checked:!1,horarios:[]},{id:3,nombre:"Miercoles",checked:!1,horarios:[]},{id:4,nombre:"Jueves",checked:!1,horarios:[]},{id:5,nombre:"Viernes",checked:!1,horarios:[]},{id:6,nombre:"Sábado",checked:!1,horarios:[]},{id:7,nombre:"Domingo",checked:!1,horarios:[]}],r.updateHorario=function(){}}]);
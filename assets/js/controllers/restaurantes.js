var app;app=angular.module("yapp"),app.controller("RestaurantesController",["$scope","$http",function(r,e){return r.title="Restaurantes",r.restaurantes=[],r.abiertos={active:!1,list:[]},e.get(base+"/restaurantes/all").then(function(e){return r.restaurantes=e.data}),r.remove=function(t){return e.delete(base+"/restaurantes/delete?id="+encodeURIComponent(t)).then(function(e){return e.data.status&&(r.restaurantes=r.restaurantes.filter(function(r){return r.id!==t})),dialog.show("Éxito",e.data.data,"error")})},r.searchBy=function(){if(r.abiertos.active)return function(r){return r.abierto}}}]),app.controller("RestaurantController",["$scope","$http","$routeParams","$window","$rootScope",function(r,e,t,a,o){var n;return r.restaurante={},r.restaurante.horarios=r.initHorarios,n=!!t.id,n&&e.get(base+"/restaurantes/"+t.id).then(function(e){var t;return r.restaurante=e.data,t=r.restaurante.horarios,r.restaurante.horarios=t.length>0?t:r.initHorarios}),r.save=function(){return r.restaurante.horarios.forEach(function(r,e){return r.checked?r.horarios.length>0||(r.checked=!1):r.horarios=[],r.horarios=r.horarios.filter(function(r){return""!==r.apertura&&""!==r.cierre})}),e.put(base+"/restaurantes/save",r.restaurante).then(function(r){if(n?"":"/edit/"+r.data.row,r.data.status)return a.location.href="#!/restaurantes"})},r.addHorario=function(e){return r.restaurante.horarios[e].horarios.push({apertura:"",cierre:""})},r.removeHorario=function(e,t){return r.restaurante.horarios[e].horarios=r.restaurante.horarios[e].horarios.filter(function(a){return a!==r.restaurante.horarios[e].horarios[t]})},r.initHorarios=[{id:1,nombre:"Lunes",checked:!1,horarios:[]},{id:2,nombre:"Martes",checked:!1,horarios:[]},{id:3,nombre:"Miercoles",checked:!1,horarios:[]},{id:4,nombre:"Jueves",checked:!1,horarios:[]},{id:5,nombre:"Viernes",checked:!1,horarios:[]},{id:6,nombre:"Sábado",checked:!1,horarios:[]},{id:7,nombre:"Domingo",checked:!1,horarios:[]}],r.updateHorario=function(){}}]);